<!-- eslint-disable @angular-eslint/template/no-autofocus -->
<!-- eslint-disable @angular-eslint/template/elements-content -->
<div
  class="align-items-center flex justify-content-center lg:px-8 md:px-6 px-4 py-8 surface-ground ng-star-inserted min-h-screen">
  <div
    class="surface-card p-4 shadow-2 border-round w-full lg:w-[30%!important]">
    <div class="text-center mb-5">
      <a routerLink="{{ homeRoute }}">
        <img
          src="https://blocks.primeng.org/assets/images/blocks/logos/hyper.svg"
          alt="Image"
          height="50"
          class="mb-3" />
      </a>

      <div class="text-900 text-3xl font-medium mb-3">Bienvenido de nuevo</div>

      <span class="text-600 font-medium line-height-3"
        >¿No tienes una cuenta?</span
      >

      <a
        routerLink="/registrarse"
        class="font-medium no-underline ml-2 text-primary-500 hover:text-primary-700 cursor-pointer"
        >¡Create una hoy!</a
      >
    </div>

    <div>
      <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
        <label for="email" class="block text-900 font-medium mb-2"
          >Correo Electrónico</label
        >

        <input
          id="email"
          formControlName="email"
          type="email"
          pAutoFocus
          [autofocus]="true"
          autocomplete="off"
          placeholder="Dirección de correo electrónico"
          pinputtext=""
          [style]="{ marginBottom: '1rem' }"
          class="p-inputtext p-component p-element w-full" />

        <div
          *ngIf="
            emailField?.invalid &&
            emailField?.errors &&
            (emailField?.dirty || emailField?.touched)
          "
          class="mb-3 -mt-[0.65rem]">
          <small
            class="text-red-400 text-sm"
            *ngIf="emailField?.hasError('required')">
            La direccion de correo electrónico es requerida.
          </small>

          <small
            class="text-red-400 text-sm"
            *ngIf="emailField?.hasError('email')">
            La direccion de correo electrónico ingresada no tiene un formato
            valido
          </small>
        </div>

        <label for="password" class="block text-900 font-medium mb-2"
          >Contraseña</label
        >

        <p-password
          inputId="password"
          placeholder="Contraseña"
          [toggleMask]="true"
          [showClear]="false"
          [style]="{
            width: '100%',
            marginBottom: '1rem',
          }"
          [inputStyle]="{
            width: '100%',
            marginBottom: '1rem',
          }"
          styleClass="p-password p-component p-inputwrapper p-input-icon-right"
          inputStyleClass="p-password p-component p-inputwrapper p-input-icon-right"
          [feedback]="false"
          formControlName="password" />

        <div
          *ngIf="
            passwordField?.invalid &&
            passwordField?.errors &&
            (passwordField?.dirty || passwordField?.touched)
          "
          class="mb-3 -mt-[1.65rem]">
          <small
            class="text-red-400 text-sm"
            *ngIf="passwordField?.hasError('required')">
            La contraseña es requerida.
          </small>

          @if (!passwordField?.hasError('required')) {
            <small
              class="block text-red-400 text-sm"
              [ngClass]="{
                hidden: isPasswordStrong(passwordField?.value!),
              }">
              La contraseña debe tener al menos 8 caracteres y contener al menos
              1 letra minúscula, 1 letra mayúscula, 1 número y 1 símbolo
              especial.
            </small>
          }
        </div>

        <div class="flex align-items-center justify-content-between mb-6">
          <div class="flex align-items-center">
            <p-checkbox
              formControlName="remember"
              (onChange)="remember()"
              inputId="rememberme1"
              [binary]="true"
              [style]="{ cursor: 'pointer' }"
              styleClass="mr-2 outFocus cursor-pointer"></p-checkbox>

            <label for="rememberme1" class="text-900 cursor-pointer"
              >Recordame</label
            >
          </div>

          <a
            routerLink="/olvide-clave"
            class="font-medium no-underline ml-2 text-primary-500 hover:text-primary-700 text-right cursor-pointer"
            >¿Has olvidado tu contraseña?</a
          >
        </div>

        <button
          pButton="pButton"
          pRipple="pRipple"
          label="Iniciar sesión"
          icon="pi pi-user"
          class="w-full"
          [loading]="loading"
          [disabled]="!loginForm.valid"></button>
      </form>
    </div>
  </div>
</div>
